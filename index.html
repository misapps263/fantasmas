 

<html>
<head>
<title>fantasmas-contador</title>

<script src="jquery.1.8.2.min.js"></script>
<script src="jquery.mobile.1.2.min.js"></script>
<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
 <!-- phonegap audio----> 
		
		<script type="text/javascript" charset="utf-8">
// Wait for device API libraries to load
//
document.addEventListener("deviceready", onDeviceReady, false);
// device APIs are available
//
function onDeviceReady() {
playAudio("/android_asset/www/door.mp3");// local con PHONEGP 4.2.0-0.23.0
//bgsound

bgsound("/android_asset/www/bgsound1.mp3");
//playAudio("http://audio.ibeat.org/content/p1rj1s/p1rj1s_-_rockGuitar.mp3?); //remoto
}

function bgsound(url) {

       var myMedia;
var loop = function (status) {
    if (status === Media.MEDIA_STOPPED) {
        myMedia.play();
    }
};
myMedia = new Media(url, null, null, loop);
myMedia.play();
 
    }
// Audio player
//
var my_media = null;
var mediaTimer = null;
// Play audio
//
function playAudio(src) {
// Create Media object from src
my_media = new Media(src, onSuccess, onError);
// Play audio
my_media.play();
// Update my_media position every second
if (mediaTimer == null) {
mediaTimer = setInterval(function() {
// get my_media position
my_media.getCurrentPosition(
// success callback
function(position) {
if (position > -1) {
setAudioPosition((position) + " sec");
}
},
// error callback
function(e) {
console.log("Error getting pos=" + e);
setAudioPosition("Error: " + e);
}
);
}, 1000);
}
}
// Pause audio
//
function pauseAudio() {
if (my_media) {
my_media.pause();
}
}
// Stop audio
//
function stopAudio() {
if (my_media) {
my_media.stop();
}
clearInterval(mediaTimer);
mediaTimer = null;
}
// onSuccess Callback
//
function onSuccess() {
console.log("playAudio():Audio Success");
}
// onError Callback
//
function onError(error) {
alert("code: " + error.code + "\n" +
"message: " + error.message + "\n");
}
// Set audio position
//
function setAudioPosition(position) {
document.getElementById("audio_position").innerHTML = position;
}
</script>
<style type="text/css">
<!-- 
 
#bg{
height:100%; background:#000 url('img/rrrrender1.jpg');height:100%; background-size:cover; background-repeat: no-repeat; background-position:center; 
overflow:hidden; } 
#fantastas{
height:100%;background:#000;} 
#fantasma1 { position:absolute;left:250px;top: 90px;float:left; z-index:100;widht:100px;}
 
.fantasma{  background-size:100%; background-position:center;background-repeat: no-repeat;height:200px;width:100px; 	opacity: 0.0;}
 
-->
</style>
<link rel="stylesheet" type="text/css" href="animations.css" />
</head>
<body>
<div id="bg" style="height:100% ">
    <div id="fantasmas">
 		<!--<div class="fantasma" id="fantasma1" data-position="1" style="position:relative;"> </div>-->
		<img class="fantasma" id="fantasma1" data-position="1" style="position:relative;" src="img/woman.png" data-face="false"/>  

    </div>
    
    		<div id="camara" style="z-index:100;width:10%;height:100%;color:#009900;position:absolute;left:0px;"  onclick="playAudio('/android_asset/www/camara.mp3');">####la camara####</div>

</div>
 

<div  style="color:red;position:absolute;top:20px;left:20px; ">
	pulsaciones<input type="text" length="3" size="3" id="pulsaciones" value="90" style="background:transparent;border:none;color:red;font-weight:bolder;font-size:125%;" class="pulse"/>
<div style="color:green;">vida<input type="text" length="3" size="3" id="vida" value="100" style="background:transparent;border:none;color:green;font-weight:bolder;font-size:125%;" class=""/>

<div>	hit<input type="text" length="3" size="3" id="hit" value="0" style="background:transparent;border:none;color:yellow;font-weight:bolder;font-size:125%;" class=""/>

</div>
</div>
 
 

</body>
<script type="text/javascript">
<!--
var x;
x=$(document);
x.ready(inicializarEventos);

function inicializarEventos()
{setInterval("susto()",33000);
  var x;
  x=$("#camara");
  x.click(flash)
  x=$("[id^='fantasma']");
  x.click( 
	function(){
	//position:absolute;left:450px;top: 150px;
	//si data-face reseteamos fantasma y hit-1
	//reseteo fantasma
	if($(this).attr('data-face')==='true'){
       	$(this).css('position','absolute');
	$(this).css('left','250px');
	$(this).css('top','90px');
	$(this).css('height','200px');
	$(this).css('width','100px');
	 //hit-1
	 //comprobamos el valor hit
	var y;
	y=$('#hit');
	console.log("vida+"+y.val());
	y.val(parseFloat(y.val())-1);
  
  
	}else{
	var y;
	y=$('#hit');
	console.log("vida+"+y.val());
	y.val(parseFloat(y.val())+1);
	playAudio("/android_asset/www/ghost3.mp3");
	}
	}
	 
	
	);
	
} 
/*
function ver()
{
  var x;
  x=$("#bg");
  x.css("color","#ff0000");
	//x.animate( {opacity: 0.9},100);
  //x.css("background-image","url('img/render1.jpg') "); 
   
	   x.css("background ","#000 ");
	x.css("background-size","cover ");  
	//$('.fantasma').css('opacity','0.3');
	setInterval(function(){
	
	/ /////////esto es un flash-azo
	x.css("background-image","url('') ");
	 x.animate({opacity:1.0,background:'#000000'},5000); 
	 x.css("background-image","  "); 
	 //x.css("background","#000000");
	 x.animate({opacity:0.0,background:'#000000'},100);
	  x.css("background-size"," cover");x.css("background-repeat"," no-repeat");
		$('.fantasma').css('opacity','0.0');  },
		
		///
		/////////mover fantasma/////////
		$( "#fantasma" ).animate({
	width:"1%",
    left: "1%",
    opacity: '1.0',
    marginLeft: "0.6in",
    background:'#000',
    borderWidth: "10px"
  }, 5000 )
		///////////////////
		, 5000)
  x.css("font-family","Courier");
	//x.animate( {opacity: 0.6},1000);
	
	
	//mover fantasmas
	$("#fantasma").css(
	 "position", "relative"
	 );
	 //$("#fantasma").css("top", "100px");
   //$("#fantasma").css("left",'19px');
	// $("#fantasma").css('opacity','0.9');
  
	//$("#fantasma").attr('data-position',$("#fantasma").attr('data-position')+10);
	//$("#fantasma").position().top+$("#fantasma").attr('data-position',$("#fantasma").attr('data-position')+10);+"px"
	 // alert($("#fantasma").position().left) ;
  
  
}*/

function presionTitulo2()
{

  var x;
  x=$("#titulo2");
  x.css("color","#ffff00");
  x.css("background-color","#ff0000");
  x.css("font-family","Arial");
}
function flash(){
 
/*/////////esto es un flash-azo*/
playAudio("/android_asset/www/camara.mp3");
var x;
var c;
//ocultamos la camara
c=$('#camara');
setTimeout(function(){
	// x.animate({opacity:0.0,background:'#000000'},2000), 
	 c.animate({opacity:0},1000 ),
	 c.animate({opacity:1},3000 )
	 }//fin animate 
	, 2000) ;
//subimos pulsaciones
pulsaciones();
//cambiamos el fondo	  
  x=$("#bg");
	 //alert('flash');
	//$('.fantasma').css('opacity','0.7');
	//$('#bg').css('opacity','0.0');
	x.css("background-image","url('img/render3.jpg') ");
	 $('.fantasma').animate({opacity:0.9 },200)
	  x.animate({opacity:0.3 },200)
		x.animate({opacity:0.8 },300)
		
	
	setTimeout(function(){
	// x.animate({opacity:0.0,background:'#000000'},2000), 
	 x.animate({opacity:1},100 ),
	 x.css("background-size"," cover"),x.css("background-repeat"," no-repeat"),
	 x.css("background-image","url('img/.jpg') "),
	 $('.fantasma').animate({opacity:0},500 ).add( mover());
	 
	 }//fin animate 
	  
		, 2000)  
		/////
		 
}
 
 function pulsaciones(){
 	var x;
	x=$('#pulsaciones');
	console.log("pulsaciones+"+x.val());
	 x.val(parseFloat(x.val())+20);
	 
	if(x.val()>200){restavida(20)}
 	relax()
 }
 function relax(){
  	var x;
	x=$('#pulsaciones');
 		//bajamos pulsaciones
 	setInterval(function(){if(x.val()>91){
 	 x.val(parseFloat(x.val())-1);
	 }}//fin animate 
	 , 7000)  ;
 }
 relax();
 function restavida(e){
 	var x;
	x=$('#vida');
	console.log("vida+"+x.val());
	x.val(parseFloat(x.val())-e);
 	var y;
	y=$('#pulsaciones');y.val(90)
 	
 }
function gameover(){
	alert('game over');

}
 
 
 
function mover( ){

	  playAudio("/android_asset/www/gosht1.mp3");
var i;
 var totalgost=$( ".fantasma" ).size();
  ///crear array de valores para crear un numero ramdom
 for(i=0;i<totalgost+1;i++){
 console.log('totalgost '+totalgost)
  //var paso=Math.floor((Math.random() * $( "#fantasma"+i+"").width()) + $( "#fantasma"+i+"").width()+Math.random() *100+12);
	 var s=Math.floor((Math.random() * 50 ),1);
	 var signo;
	 if(s<=25){ direccion ='+';
	 						$( "#fantasma"+i+"").attr( 'src', "img/woman1.png" );
							$( "#fantasma"+i+"").attr( 'data-face', "true" );
							}else{
							direccion='-';
							$( "#fantasma"+i+"").attr( 'src', "img/woman.png" );
							$( "#fantasma"+i+"").attr( 'data-face', "false" );
							};
	  var paso=Math.floor((Math.random() * 100) + 50);
 // alert('$( "#fantasma"'+i+")");
    $( "#fantasma"+i+"").animate({ 'left': direccion+"="+ paso +"px" }, 100 ) 
		 console.log( direccion +":+="+ paso +"px"  );
 $( "#fantasma"+i+"").css('opacity','1.0');
 
 $( "#fantasma"+i+"").animate({ 'top': "+=5px" }, 100 );
  $( "#fantasma"+i+"").animate({ 'height': "+=35px" ,'width': "+=25px" }, 100 )
 
 }
 
 //comprobamos el valor hit
 
 var y;
	y=$('#hit');
	console.log("vida+"+y.val());
	y.val(parseFloat(y.val())+1);
 if(h>5){gameover()}
} 
// -->


function susto(){
	pulsaciones();
var i=Math.floor(Math.random() *5,1);
sustoimg="ring"+i;
playAudio("/android_asset/www/gosht"+i+".mp3");
var x=$('#bg');
x.animate({opacity:0.0 },200)
	 x.css("background-image","url('img/"+sustoimg+".jpg') ");
   x.animate({opacity:0.5 },100);x.animate({opacity:1.0 },200);
 setTimeout(function(){x.css("background-image","url('img/rend.jpg') ")},500)
}


</script>
</html>
